<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>미로 탈출 게임</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding-top: 20px;
      }
      #maze {
        display: grid;
        grid-template-columns: repeat(10, 30px);
        grid-template-rows: repeat(10, 30px);
        gap: 2px;
        justify-content: center;
      }
      .cell {
        width: 30px;
        height: 30px;
        background-color: #fff;
        border: 1px solid #ccc;
      }
      .wall {
        background-color: #000;
      }
      .player {
        background-color: #ff0;
      }
      .exit {
        background-color: #0f0;
      }
    </style>
  </head>
  <body>
    <h1>미로 탈출 게임</h1>
    <p>방향키로 플레이어를 이동시켜 출구를 찾아보세요!</p>
    <div id="maze"></div>

    <script>
      const mazeSize = 10; // 미로 크기 (10x10)
      let playerPos = { x: 0, y: 0 }; // 플레이어 초기 위치
      const maze = [
        [
          "start",
          "empty",
          "empty",
          "wall",
          "wall",
          "empty",
          "empty",
          "empty",
          "wall",
          "empty",
        ],
        [
          "empty",
          "wall",
          "empty",
          "empty",
          "empty",
          "wall",
          "empty",
          "wall",
          "empty",
          "empty",
        ],
        [
          "empty",
          "wall",
          "empty",
          "wall",
          "empty",
          "wall",
          "empty",
          "wall",
          "empty",
          "empty",
        ],
        [
          "wall",
          "empty",
          "empty",
          "wall",
          "empty",
          "empty",
          "empty",
          "empty",
          "wall",
          "empty",
        ],
        [
          "wall",
          "wall",
          "empty",
          "wall",
          "wall",
          "wall",
          "wall",
          "empty",
          "wall",
          "empty",
        ],
        [
          "empty",
          "empty",
          "empty",
          "wall",
          "empty",
          "empty",
          "wall",
          "empty",
          "empty",
          "exit",
        ],
        [
          "empty",
          "wall",
          "empty",
          "wall",
          "empty",
          "wall",
          "wall",
          "wall",
          "empty",
          "wall",
        ],
        [
          "empty",
          "wall",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "wall",
          "empty",
        ],
        [
          "wall",
          "wall",
          "wall",
          "wall",
          "wall",
          "empty",
          "wall",
          "wall",
          "wall",
          "wall",
        ],
        [
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
          "empty",
        ],
      ];

      // 미로 렌더링
      function renderMaze() {
        const mazeContainer = document.getElementById("maze");
        mazeContainer.innerHTML = ""; // 기존 미로를 지우기

        for (let row = 0; row < mazeSize; row++) {
          for (let col = 0; col < mazeSize; col++) {
            const cell = document.createElement("div");
            cell.classList.add("cell");

            if (maze[row][col] === "wall") {
              cell.classList.add("wall");
            } else if (maze[row][col] === "exit") {
              cell.classList.add("exit");
            }

            mazeContainer.appendChild(cell);
          }
        }

        // 플레이어 위치 업데이트
        const playerCell =
          mazeContainer.children[playerPos.y * mazeSize + playerPos.x];
        playerCell.classList.add("player");
      }

      // 플레이어 이동
      function movePlayer(e) {
        let newX = playerPos.x;
        let newY = playerPos.y;

        if (e.key === "ArrowUp") newY--;
        if (e.key === "ArrowDown") newY++;
        if (e.key === "ArrowLeft") newX--;
        if (e.key === "ArrowRight") newX++;

        if (
          newX >= 0 &&
          newX < mazeSize &&
          newY >= 0 &&
          newY < mazeSize &&
          maze[newY][newX] !== "wall"
        ) {
          playerPos.x = newX;
          playerPos.y = newY;

          // 게임 종료 조건: 출구에 도달하면
          if (maze[playerPos.y][playerPos.x] === "exit") {
            alert("축하합니다! 출구를 찾았습니다!");
            playerPos = { x: 0, y: 0 }; // 초기화
          }

          renderMaze();
        }
      }

      // 초기 미로 렌더링
      renderMaze();

      // 키보드 입력 이벤트
      window.addEventListener("keydown", movePlayer);
    </script>
  </body>
</html>
